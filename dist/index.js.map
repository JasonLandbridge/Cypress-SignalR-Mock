{"version":3,"file":"index.js","sources":["../src/log.ts","../node_modules/tslib/tslib.es6.js","../node_modules/rxjs/dist/esm5/internal/util/isFunction.js","../node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","../node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","../node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","../node_modules/rxjs/dist/esm5/internal/Subscription.js","../node_modules/rxjs/dist/esm5/internal/config.js","../node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","../node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","../node_modules/rxjs/dist/esm5/internal/util/noop.js","../node_modules/rxjs/dist/esm5/internal/util/errorContext.js","../node_modules/rxjs/dist/esm5/internal/Subscriber.js","../node_modules/rxjs/dist/esm5/internal/symbol/observable.js","../node_modules/rxjs/dist/esm5/internal/util/identity.js","../node_modules/rxjs/dist/esm5/internal/util/pipe.js","../node_modules/rxjs/dist/esm5/internal/Observable.js","../node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js","../node_modules/rxjs/dist/esm5/internal/Subject.js","../node_modules/@microsoft/signalr/dist/esm/Utils.js","../node_modules/@microsoft/signalr/dist/esm/Subject.js","../src/types/HubConnectionMock.ts","../src/utils.ts","../src/cypress-commands.ts","../src/index.ts"],"sourcesContent":["export default class Log {\n  private static _prefix: string = \"[Cypress-SignalR-Mock] - \";\n  private static _logLevel: number = 3;\n\n  public static debug(message: string) {\n    if (this._logLevel >= 4) {\n      console.debug(this._prefix + message);\n    }\n  }\n\n  public static info(message: string, value: any = undefined) {\n    if (this._logLevel >= 3) {\n      console.info(this._prefix + message, value);\n    }\n  }\n\n  public static warn(message: string) {\n    if (this._logLevel >= 1) {\n      console.warn(this._prefix + message);\n    }\n  }\n\n  public static error(message: string, throwError: boolean = true) {\n    if (this._logLevel >= 0) {\n      if (throwError) {\n        throw new Error(this._prefix + message);\n      } else {\n        console.error(this._prefix + message);\n      }\n    }\n  }\n\n  static setLogLevel(logLevel: number): void {\n    this._logLevel = logLevel;\n  }\n}\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.push(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.push(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","export var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscriber = new SafeSubscriber({\n                next: function (value) {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            _this.subscribe(subscriber);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","import { createErrorClass } from './createErrorClass';\nexport var ObjectUnsubscribedError = createErrorClass(function (_super) {\n    return function ObjectUnsubscribedErrorImpl() {\n        _super(this);\n        this.name = 'ObjectUnsubscribedError';\n        this.message = 'object unsubscribed';\n    };\n});\n//# sourceMappingURL=ObjectUnsubscribedError.js.map","import { __extends, __values } from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscription, EMPTY_SUBSCRIPTION } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { arrRemove } from './util/arrRemove';\nimport { errorContext } from './util/errorContext';\nvar Subject = (function (_super) {\n    __extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.closed = false;\n        _this.currentObservers = null;\n        _this.observers = [];\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype._throwIfClosed = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n    };\n    Subject.prototype.next = function (value) {\n        var _this = this;\n        errorContext(function () {\n            var e_1, _a;\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                if (!_this.currentObservers) {\n                    _this.currentObservers = Array.from(_this.observers);\n                }\n                try {\n                    for (var _b = __values(_this.currentObservers), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var observer = _c.value;\n                        observer.next(value);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n        });\n    };\n    Subject.prototype.error = function (err) {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.hasError = _this.isStopped = true;\n                _this.thrownError = err;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().error(err);\n                }\n            }\n        });\n    };\n    Subject.prototype.complete = function () {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.isStopped = true;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().complete();\n                }\n            }\n        });\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = this.closed = true;\n        this.observers = this.currentObservers = null;\n    };\n    Object.defineProperty(Subject.prototype, \"observed\", {\n        get: function () {\n            var _a;\n            return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Subject.prototype._trySubscribe = function (subscriber) {\n        this._throwIfClosed();\n        return _super.prototype._trySubscribe.call(this, subscriber);\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        this._throwIfClosed();\n        this._checkFinalizedStatuses(subscriber);\n        return this._innerSubscribe(subscriber);\n    };\n    Subject.prototype._innerSubscribe = function (subscriber) {\n        var _this = this;\n        var _a = this, hasError = _a.hasError, isStopped = _a.isStopped, observers = _a.observers;\n        if (hasError || isStopped) {\n            return EMPTY_SUBSCRIPTION;\n        }\n        this.currentObservers = null;\n        observers.push(subscriber);\n        return new Subscription(function () {\n            _this.currentObservers = null;\n            arrRemove(observers, subscriber);\n        });\n    };\n    Subject.prototype._checkFinalizedStatuses = function (subscriber) {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, isStopped = _a.isStopped;\n        if (hasError) {\n            subscriber.error(thrownError);\n        }\n        else if (isStopped) {\n            subscriber.complete();\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = (function (_super) {\n    __extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var _a, _b;\n        return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : EMPTY_SUBSCRIPTION;\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { NullLogger } from \"./Loggers\";\r\n// Version token that will be replaced by the prepack command\r\n/** The version of the SignalR client. */\r\nexport const VERSION = \"7.0.5\";\r\n/** @private */\r\nexport class Arg {\r\n    static isRequired(val, name) {\r\n        if (val === null || val === undefined) {\r\n            throw new Error(`The '${name}' argument is required.`);\r\n        }\r\n    }\r\n    static isNotEmpty(val, name) {\r\n        if (!val || val.match(/^\\s*$/)) {\r\n            throw new Error(`The '${name}' argument should not be empty.`);\r\n        }\r\n    }\r\n    static isIn(val, values, name) {\r\n        // TypeScript enums have keys for **both** the name and the value of each enum member on the type itself.\r\n        if (!(val in values)) {\r\n            throw new Error(`Unknown ${name} value: ${val}.`);\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nexport class Platform {\r\n    // react-native has a window but no document so we should check both\r\n    static get isBrowser() {\r\n        return typeof window === \"object\" && typeof window.document === \"object\";\r\n    }\r\n    // WebWorkers don't have a window object so the isBrowser check would fail\r\n    static get isWebWorker() {\r\n        return typeof self === \"object\" && \"importScripts\" in self;\r\n    }\r\n    // react-native has a window but no document\r\n    static get isReactNative() {\r\n        return typeof window === \"object\" && typeof window.document === \"undefined\";\r\n    }\r\n    // Node apps shouldn't have a window object, but WebWorkers don't either\r\n    // so we need to check for both WebWorker and window\r\n    static get isNode() {\r\n        return !this.isBrowser && !this.isWebWorker && !this.isReactNative;\r\n    }\r\n}\r\n/** @private */\r\nexport function getDataDetail(data, includeContent) {\r\n    let detail = \"\";\r\n    if (isArrayBuffer(data)) {\r\n        detail = `Binary data of length ${data.byteLength}`;\r\n        if (includeContent) {\r\n            detail += `. Content: '${formatArrayBuffer(data)}'`;\r\n        }\r\n    }\r\n    else if (typeof data === \"string\") {\r\n        detail = `String data of length ${data.length}`;\r\n        if (includeContent) {\r\n            detail += `. Content: '${data}'`;\r\n        }\r\n    }\r\n    return detail;\r\n}\r\n/** @private */\r\nexport function formatArrayBuffer(data) {\r\n    const view = new Uint8Array(data);\r\n    // Uint8Array.map only supports returning another Uint8Array?\r\n    let str = \"\";\r\n    view.forEach((num) => {\r\n        const pad = num < 16 ? \"0\" : \"\";\r\n        str += `0x${pad}${num.toString(16)} `;\r\n    });\r\n    // Trim of trailing space.\r\n    return str.substr(0, str.length - 1);\r\n}\r\n// Also in signalr-protocol-msgpack/Utils.ts\r\n/** @private */\r\nexport function isArrayBuffer(val) {\r\n    return val && typeof ArrayBuffer !== \"undefined\" &&\r\n        (val instanceof ArrayBuffer ||\r\n            // Sometimes we get an ArrayBuffer that doesn't satisfy instanceof\r\n            (val.constructor && val.constructor.name === \"ArrayBuffer\"));\r\n}\r\n/** @private */\r\nexport async function sendMessage(logger, transportName, httpClient, url, content, options) {\r\n    const headers = {};\r\n    const [name, value] = getUserAgentHeader();\r\n    headers[name] = value;\r\n    logger.log(LogLevel.Trace, `(${transportName} transport) sending data. ${getDataDetail(content, options.logMessageContent)}.`);\r\n    const responseType = isArrayBuffer(content) ? \"arraybuffer\" : \"text\";\r\n    const response = await httpClient.post(url, {\r\n        content,\r\n        headers: { ...headers, ...options.headers },\r\n        responseType,\r\n        timeout: options.timeout,\r\n        withCredentials: options.withCredentials,\r\n    });\r\n    logger.log(LogLevel.Trace, `(${transportName} transport) request complete. Response status: ${response.statusCode}.`);\r\n}\r\n/** @private */\r\nexport function createLogger(logger) {\r\n    if (logger === undefined) {\r\n        return new ConsoleLogger(LogLevel.Information);\r\n    }\r\n    if (logger === null) {\r\n        return NullLogger.instance;\r\n    }\r\n    if (logger.log !== undefined) {\r\n        return logger;\r\n    }\r\n    return new ConsoleLogger(logger);\r\n}\r\n/** @private */\r\nexport class SubjectSubscription {\r\n    constructor(subject, observer) {\r\n        this._subject = subject;\r\n        this._observer = observer;\r\n    }\r\n    dispose() {\r\n        const index = this._subject.observers.indexOf(this._observer);\r\n        if (index > -1) {\r\n            this._subject.observers.splice(index, 1);\r\n        }\r\n        if (this._subject.observers.length === 0 && this._subject.cancelCallback) {\r\n            this._subject.cancelCallback().catch((_) => { });\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nexport class ConsoleLogger {\r\n    constructor(minimumLogLevel) {\r\n        this._minLevel = minimumLogLevel;\r\n        this.out = console;\r\n    }\r\n    log(logLevel, message) {\r\n        if (logLevel >= this._minLevel) {\r\n            const msg = `[${new Date().toISOString()}] ${LogLevel[logLevel]}: ${message}`;\r\n            switch (logLevel) {\r\n                case LogLevel.Critical:\r\n                case LogLevel.Error:\r\n                    this.out.error(msg);\r\n                    break;\r\n                case LogLevel.Warning:\r\n                    this.out.warn(msg);\r\n                    break;\r\n                case LogLevel.Information:\r\n                    this.out.info(msg);\r\n                    break;\r\n                default:\r\n                    // console.debug only goes to attached debuggers in Node, so we use console.log for Trace and Debug\r\n                    this.out.log(msg);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nexport function getUserAgentHeader() {\r\n    let userAgentHeaderName = \"X-SignalR-User-Agent\";\r\n    if (Platform.isNode) {\r\n        userAgentHeaderName = \"User-Agent\";\r\n    }\r\n    return [userAgentHeaderName, constructUserAgent(VERSION, getOsName(), getRuntime(), getRuntimeVersion())];\r\n}\r\n/** @private */\r\nexport function constructUserAgent(version, os, runtime, runtimeVersion) {\r\n    // Microsoft SignalR/[Version] ([Detailed Version]; [Operating System]; [Runtime]; [Runtime Version])\r\n    let userAgent = \"Microsoft SignalR/\";\r\n    const majorAndMinor = version.split(\".\");\r\n    userAgent += `${majorAndMinor[0]}.${majorAndMinor[1]}`;\r\n    userAgent += ` (${version}; `;\r\n    if (os && os !== \"\") {\r\n        userAgent += `${os}; `;\r\n    }\r\n    else {\r\n        userAgent += \"Unknown OS; \";\r\n    }\r\n    userAgent += `${runtime}`;\r\n    if (runtimeVersion) {\r\n        userAgent += `; ${runtimeVersion}`;\r\n    }\r\n    else {\r\n        userAgent += \"; Unknown Runtime Version\";\r\n    }\r\n    userAgent += \")\";\r\n    return userAgent;\r\n}\r\n// eslint-disable-next-line spaced-comment\r\n/*#__PURE__*/ function getOsName() {\r\n    if (Platform.isNode) {\r\n        switch (process.platform) {\r\n            case \"win32\":\r\n                return \"Windows NT\";\r\n            case \"darwin\":\r\n                return \"macOS\";\r\n            case \"linux\":\r\n                return \"Linux\";\r\n            default:\r\n                return process.platform;\r\n        }\r\n    }\r\n    else {\r\n        return \"\";\r\n    }\r\n}\r\n// eslint-disable-next-line spaced-comment\r\n/*#__PURE__*/ function getRuntimeVersion() {\r\n    if (Platform.isNode) {\r\n        return process.versions.node;\r\n    }\r\n    return undefined;\r\n}\r\nfunction getRuntime() {\r\n    if (Platform.isNode) {\r\n        return \"NodeJS\";\r\n    }\r\n    else {\r\n        return \"Browser\";\r\n    }\r\n}\r\n/** @private */\r\nexport function getErrorString(e) {\r\n    if (e.stack) {\r\n        return e.stack;\r\n    }\r\n    else if (e.message) {\r\n        return e.message;\r\n    }\r\n    return `${e}`;\r\n}\r\n/** @private */\r\nexport function getGlobalThis() {\r\n    // globalThis is semi-new and not available in Node until v12\r\n    if (typeof globalThis !== \"undefined\") {\r\n        return globalThis;\r\n    }\r\n    if (typeof self !== \"undefined\") {\r\n        return self;\r\n    }\r\n    if (typeof window !== \"undefined\") {\r\n        return window;\r\n    }\r\n    if (typeof global !== \"undefined\") {\r\n        return global;\r\n    }\r\n    throw new Error(\"could not find global\");\r\n}\r\n//# sourceMappingURL=Utils.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nimport { SubjectSubscription } from \"./Utils\";\r\n/** Stream implementation to stream items to the server. */\r\nexport class Subject {\r\n    constructor() {\r\n        this.observers = [];\r\n    }\r\n    next(item) {\r\n        for (const observer of this.observers) {\r\n            observer.next(item);\r\n        }\r\n    }\r\n    error(err) {\r\n        for (const observer of this.observers) {\r\n            if (observer.error) {\r\n                observer.error(err);\r\n            }\r\n        }\r\n    }\r\n    complete() {\r\n        for (const observer of this.observers) {\r\n            if (observer.complete) {\r\n                observer.complete();\r\n            }\r\n        }\r\n    }\r\n    subscribe(observer) {\r\n        this.observers.push(observer);\r\n        return new SubjectSubscription(this, observer);\r\n    }\r\n}\r\n//# sourceMappingURL=Subject.js.map","import Log from \"../log\";\nimport { Subject } from \"rxjs\";\nimport IPayload from \"./IPayload\";\nimport { IHubConnectionData } from \"./IHubConnectionData\";\nimport IServerInvoke from \"./IServerInvoke\";\nimport { IStreamResult, Subject as SignalrSubject } from \"@microsoft/signalr\";\n\n/**\n * Mock implementation of HubConnection,\n * Based on \"@microsoft/signalr\": \"7.0.5\" - \"@microsoft/signalr/src/HubConnection.ts\",\n */\nexport default class HubConnectionMock {\n  private _hubConnectionData: IHubConnectionData[] = [];\n  private _serverInvokes: IServerInvoke[] = [];\n  public name: string;\n\n  constructor(name: string) {\n    this.name = name;\n  }\n\n  public publish(messageType: string, value: any): void {\n    messageType = messageType.toLowerCase();\n\n    const channels = this._hubConnectionData.filter(\n      (x) => x.messageType === messageType\n    );\n    if (channels.length === 0) {\n      Log.warn(`No subscribers for ${messageType}`);\n      return;\n    }\n    Log.debug(\n      `Publishing action: ${messageType} to ${channels.length} subscribers`\n    );\n    channels.forEach((x) => {\n      x.channel.next({ name: messageType, value });\n    });\n  }\n\n  public verify(\n    messageType: string,\n    callback?: (invokes: IServerInvoke[]) => void\n  ): void {\n    messageType = messageType.toLowerCase();\n\n    const currentInvokes = this._serverInvokes.filter(\n      (s) => s.action === messageType\n    );\n\n    if (callback) {\n      callback(currentInvokes);\n    }\n  }\n\n  // region Native SignalR methods\n\n  /** Registers a handler that will be invoked when the hub method with the specified method name is invoked.\n   *\n   * @param {string} methodName The name of the hub method to define.\n   * @param {Function} newMethod The handler that will be raised when the hub method is invoked.\n   */\n  public on(methodName: string, newMethod: (...args: any[]) => any): void;\n  public on(methodName: string, newMethod: (...args: any[]) => void): void {\n    methodName = methodName.toLowerCase();\n\n    // Create if it doesn't exist yet\n    if (!this._hubConnectionData.some((x) => x.messageType === methodName)) {\n      this._hubConnectionData.push({\n        messageType: methodName,\n        isStream: false,\n        channel: new Subject<any>(),\n        subscriptions: [],\n      });\n    }\n\n    // Find the connection data\n    let connectionData = this._hubConnectionData.find(\n      (x) => x.messageType === methodName\n    );\n\n    if (!connectionData) {\n      throw new Error(`Could not find connection data for ${methodName}`);\n    }\n\n    // Subscribe to the channel\n    let subscription = connectionData.channel.subscribe((payload: IPayload) => {\n      newMethod(payload.value);\n    });\n\n    connectionData.subscriptions.push({\n      handler: newMethod,\n      subscription,\n    });\n  }\n\n  /** Invokes a streaming hub method on the server using the specified name and arguments.\n   *\n   * @typeparam T The type of the items returned by the server.\n   * @param {string} methodName The name of the server method to invoke.\n   * @param {any[]} args The arguments used to invoke the server method.\n   * @returns {IStreamResult<T>} An object that yields results from the server as they are received.\n   */\n  // @ts-ignore\n  public stream<T = any>(methodName: string, ...args: any[]): IStreamResult<T> {\n    methodName = methodName.toLowerCase();\n\n    // Create if it doesn't exist yet\n    if (!this._hubConnectionData.some((x) => x.messageType === methodName)) {\n      this._hubConnectionData.push({\n        messageType: methodName,\n        isStream: true,\n        channel: new Subject<T>(),\n        subscriptions: [],\n      });\n    }\n\n    // Find the connection data\n    let connectionData = this._hubConnectionData.find(\n      (x) => x.messageType === methodName\n    );\n\n    if (!connectionData) {\n      throw new Error(`Could not find connection data for ${methodName}`);\n    }\n\n    const signalrSubject = new SignalrSubject<T>();\n\n    // SignalR has a custom subject\n    connectionData.channel.subscribe({\n      next: (x) => signalrSubject.next(x),\n      error: (err) => signalrSubject.error(err),\n      complete: () => signalrSubject.complete(),\n    });\n\n    return signalrSubject;\n  }\n\n  /** Invokes a hub method on the server using the specified name and arguments.\n   *\n   * The Promise returned by this method resolves when the server indicates it has finished invoking the method. When the promise\n   * resolves, the server has finished invoking the method. If the server method returns a result, it is produced as the result of\n   * resolving the Promise.\n   *\n   * @typeparam T The expected return type.\n   * @param {string} methodName The name of the server method to invoke.\n   * @param {any[]} args The arguments used to invoke the server method.\n   * @returns {Promise<T>} A Promise that resolves with the result of the server method (if any), or rejects with an error.\n   */\n  invoke<T = any>(methodName: string, ...args: any[]): Promise<T> {\n    return new Promise<T>((resolve) => {\n      this._serverInvokes.push({\n        action: methodName,\n        args,\n      });\n      resolve(0 as any);\n    });\n  }\n\n  /** Removes all handlers for the specified hub method.\n   *\n   * @param {string} methodName The name of the method to remove handlers for.\n   */\n  public off(methodName: string): void;\n  /** Removes the specified handler for the specified hub method.\n   *\n   * You must pass the exact same Function instance as was previously passed to {@link @microsoft/signalr.HubConnection.on}. Passing a different instance (even if the function\n   * body is the same) will not remove the handler.\n   *\n   * @param {string} methodName The name of the method to remove handlers for.\n   * @param {Function} method The handler to remove. This must be the same Function instance as the one passed to {@link @microsoft/signalr.HubConnection.on}.\n   */\n  public off(methodName: string, method: (...args: any[]) => void): void;\n  public off(methodName: string, method?: (...args: any[]) => void): void {\n    methodName = methodName.toLowerCase();\n\n    const index = this._hubConnectionData.findIndex(\n      (x) => x.messageType === methodName\n    );\n    if (index == -1) {\n      Log.warn(`No channels registered for action name: ${methodName}`);\n      return;\n    }\n\n    if (method) {\n      const handlerIndex = this._hubConnectionData[\n        index\n      ].subscriptions.findIndex((x) => x.handler === method);\n\n      if (handlerIndex == -1) {\n        Log.warn(\n          `Could not find the handler to delete for action name: ${methodName}`\n        );\n        return;\n      }\n\n      this._hubConnectionData[index].subscriptions.splice(handlerIndex, 1);\n\n      if (this._hubConnectionData[index].subscriptions.length === 0) {\n        this._hubConnectionData.splice(index, 1);\n      }\n    } else {\n      this._hubConnectionData.splice(index, 1);\n    }\n  }\n\n  /** Registers a handler that will be invoked when the connection is closed.\n   *\n   * @param {Function} callback The handler that will be invoked when the connection is closed. Optionally receives a single argument containing the error that caused the connection to close (if any).\n   */\n  // @ts-ignore\n  public onclose(callback: (error?: Error) => void): void {\n    return;\n  }\n\n  /** Starts the connection.\n   *\n   * @returns {Promise<void>} A Promise that resolves when the connection has been successfully established, or rejects with an error.\n   */\n  public start(): Promise<void> {\n    return Promise.resolve();\n  }\n\n  /** Stops the connection.\n   *\n   * @returns {Promise<void>} A Promise that resolves when the connection has been successfully terminated, or rejects with an error.\n   */\n  public async stop(): Promise<void> {\n    return Promise.resolve();\n  }\n\n  /** Registers a handler that will be invoked when the connection starts reconnecting.\n   *\n   * @param {Function} callback The handler that will be invoked when the connection starts reconnecting. Optionally receives a single argument containing the error that caused the connection to start reconnecting (if any).\n   */\n  // @ts-ignore\n  public onreconnecting(callback: (error?: Error) => void): void {\n    return;\n  }\n\n  /** Registers a handler that will be invoked when the connection successfully reconnects.\n   *\n   * @param {Function} callback The handler that will be invoked when the connection successfully reconnects.\n   */\n  // @ts-ignore\n  public onreconnected(callback: (connectionId?: string) => void): void {\n    return;\n  }\n\n  /** Invokes a hub method on the server using the specified name and arguments. Does not wait for a response from the receiver.\n   *\n   * The Promise returned by this method resolves when the client has sent the invocation to the server. The server may still\n   * be processing the invocation.\n   *\n   * @param {string} methodName The name of the server method to invoke.\n   * @param {any[]} args The arguments used to invoke the server method.\n   * @returns {Promise<void>} A Promise that resolves when the invocation has been successfully sent, or rejects with an error.\n   */\n  // @ts-ignore\n  public send(methodName: string, ...args: any[]): Promise<void> {\n    return Promise.resolve();\n  }\n\n  // endregion\n}\n","import HubConnectionMock from \"./types/HubConnectionMock.ts\";\nimport IMockData from \"./types/IMockData.ts\";\nimport Log from \"./log.ts\";\n\nexport function isCypressRunning(): boolean {\n  if (isSSR()) {\n    return false;\n  }\n  return window.hasOwnProperty(\"Cypress\");\n}\n\nexport function getCypressSignalrMockData(): IMockData {\n  if (!isSSR() && window[\"cypress-signalr-mock\"]) {\n    return window[\"cypress-signalr-mock\"];\n  }\n  // Initialize the global object\n  clearCypressSignalrMockData();\n  return getCypressSignalrMockData();\n}\n\nexport function setCypressSignalrMockData(value: IMockData): void {\n  if (isSSR()) {\n    return;\n  }\n  window[\"cypress-signalr-mock\"] = value;\n}\n\nexport function clearCypressSignalrMockData(): void {\n  setCypressSignalrMockData(defaultCypressSignalrMockData());\n}\n\nexport function defaultCypressSignalrMockData(): IMockData {\n  return {\n    mocks: [],\n  };\n}\n\nexport function getHubConnectionMock(\n  hubName: string\n): HubConnectionMock | null {\n  const data = getCypressSignalrMockData();\n  return data.mocks.find((x) => x.name === hubName) ?? null;\n}\n\nexport function isSSR(): boolean {\n  if (typeof window === \"undefined\") {\n    Log.error(\n      \"window is not defined. This most likely happens during SSR, which is not supported\",\n      false\n    );\n    return true;\n  }\n  return false;\n}\n\nexport function isInVitestMode(): boolean {\n  return (\n    typeof process !== \"undefined\" &&\n    process?.env?.hasOwnProperty(\"VITEST\") &&\n    process.env.VITEST === \"true\"\n  );\n}\n","/// <reference types=\"cypress\" />\nimport Log from \"./log\";\nimport IServerInvoke from \"./types/IServerInvoke\";\nimport {\n  clearCypressSignalrMockData,\n  getCypressSignalrMockData,\n  getHubConnectionMock,\n  isCypressRunning,\n} from \"./utils.ts\";\n\nexport function setupCypressCommands() {\n  if (!isCypressRunning()) {\n    Log.debug(\"Cypress is not running, skipping setup of Cypress commands\");\n    return;\n  }\n\n  // @ts-ignore\n  const cypress = window.Cypress;\n\n  cypress.Commands.add(\"hubPublish\", hubPublish);\n\n  cypress.Commands.add(\"hubVerifyInvokes\", hubVerify);\n\n  cypress.Commands.add(\"hubClear\", hubClear);\n\n  cypress.Commands.add(\"hubPrintData\", hubPrintData);\n}\n\nexport function hubPublish(hubName: string, messageType: string, payload: any) {\n  const hubConnectionMock = getHubConnectionMock(hubName);\n  if (!hubConnectionMock) {\n    Log.error(`[cy.hubPublish] - HubConnectionMock not found for ${hubName}`);\n    return;\n  }\n  hubConnectionMock.publish(messageType, payload);\n}\n\nexport function hubVerify(\n  hubName: string,\n  messageType: string,\n  callback?: (invokes: IServerInvoke[]) => void\n) {\n  const hubConnectionMock = getHubConnectionMock(hubName);\n  if (!hubConnectionMock) {\n    Log.error(\n      `[cy.hubVerify] - HubConnectionMock not found for hub with name: ${hubName}`\n    );\n    return;\n  }\n  hubConnectionMock.verify(messageType, callback);\n}\n\nexport function hubPrintData() {\n  Log.info(\n    'Current window[\"cypress-signalr-mock\"] data:',\n    getCypressSignalrMockData()\n  );\n}\n\nexport function hubClear() {\n  clearCypressSignalrMockData();\n}\n","// load type definitions that come with Cypress module\n// and then add our new commands to the \"cy\" object\n/// <reference types=\"cypress\" />\n\nimport { HubConnection } from \"@microsoft/signalr\";\nimport HubConnectionMock from \"./types/HubConnectionMock\";\nimport { setupCypressCommands } from \"./cypress-commands\";\nimport IMockData from \"./types/IMockData\";\nimport IServerInvoke from \"./types/IServerInvoke\";\nimport {\n  getCypressSignalrMockData,\n  isCypressRunning,\n  isInVitestMode,\n} from \"./utils.ts\";\nimport Log from \"./log.ts\";\n\nsetupCypressCommands();\nuseCypressSignalRMock(\"default\");\n\nexport function useCypressSignalRMock(\n  name: string,\n  {\n    debug,\n    enableForVitest,\n  }: Partial<{ debug?: boolean; enableForVitest?: boolean }> = {}\n): HubConnection | null {\n  if (debug) {\n    Log.setLogLevel(4);\n  }\n  if (!enableForVitest && isInVitestMode()) {\n    Log.info(\n      `Vitest is running but 'enableForVitest' is ${enableForVitest}, skip enabling CypressSignalRMock...`\n    );\n  }\n\n  if (isCypressRunning() || (enableForVitest && isInVitestMode())) {\n    const mock = new HubConnectionMock(name);\n    getCypressSignalrMockData().mocks.push(mock);\n    return <HubConnection>(mock as unknown);\n  }\n  return null;\n}\n\n/**\n * Typings\n */\n// This cannot be in a index.d.ts file otherwise it will not be loaded in by Cypress\ndeclare global {\n  interface Window {\n    \"cypress-signalr-mock\": IMockData;\n  }\n\n  namespace Cypress {\n    interface Chainable<Subject = any> {\n      /**\n       * Simulates a message sent from the Server => Client\n       * @param hubName The name of the hub\n       * @param messageType The name of the message type\n       * @param payload The payload to send with the action\n       */\n      hubPublish(\n        hubName: string,\n        messageType: string,\n        payload: any\n      ): Chainable<Subject>;\n\n      /**\n       * Verifies that a message was sent from the Client => Server\n       * @param hubName The name of the hub\n       * @param messageType The name of the message type\n       * @param callback A callback function that will be called with the invokes\n       */\n      hubVerifyInvokes(\n        hubName: string,\n        messageType: string,\n        callback?: (invokes: IServerInvoke[]) => void\n      ): Chainable<Subject>;\n\n      /**\n       * Clears all data from the window[\"cypress-signalr-mock\"] object\n       */\n      hubClear(): Chainable<Subject>;\n\n      /**\n       * Prints the current data to console in the window[\"cypress-signalr-mock\"] object\n       */\n      hubPrintData(): Chainable<Subject>;\n    }\n  }\n}\n\nexport {\n  hubPublish,\n  hubVerify,\n  hubClear,\n  hubPrintData,\n} from \"./cypress-commands\";\n"],"names":["Log","message","value","throwError","logLevel","__publicField","extendStatics","d","b","p","__extends","__","__values","o","s","m","i","__read","n","r","ar","e","error","__spreadArray","to","from","pack","l","isFunction","createErrorClass","createImpl","_super","instance","ctorFunc","UnsubscriptionError","errors","err","arrRemove","arr","item","index","Subscription","initialTeardown","e_1","_a","e_2","_b","_parentage","_parentage_1","_parentage_1_1","parent_1","e_1_1","initialFinalizer","_finalizers","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","e_2_1","teardown","parent","empty","EMPTY_SUBSCRIPTION","isSubscription","config","timeoutProvider","handler","timeout","args","_i","delegate","handle","reportUnhandledError","noop","errorContext","cb","Subscriber","destination","_this","EMPTY_OBSERVER","next","complete","SafeSubscriber","_bind","bind","fn","thisArg","ConsumerObserver","partialObserver","handleUnhandledError","observerOrNext","context_1","defaultErrorHandler","observable","identity","x","pipeFromArray","fns","input","prev","Observable","subscribe","operator","subscriber","isSubscriber","source","sink","promiseCtor","getPromiseCtor","resolve","reject","Symbol_observable","operations","isObserver","ObjectUnsubscribedError","Subject","subject","AnonymousSubject","_c","observer","observers","hasError","isStopped","thrownError","SubjectSubscription","_","HubConnectionMock","name","messageType","channels","callback","currentInvokes","methodName","newMethod","connectionData","subscription","payload","signalrSubject","SignalrSubject","method","handlerIndex","isCypressRunning","isSSR","getCypressSignalrMockData","clearCypressSignalrMockData","setCypressSignalrMockData","defaultCypressSignalrMockData","getHubConnectionMock","hubName","isInVitestMode","setupCypressCommands","cypress","hubPublish","hubVerify","hubClear","hubPrintData","hubConnectionMock","useCypressSignalRMock","debug","enableForVitest","mock"],"mappings":"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","x_google_ignoreList":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]}